# Laravel Lesson レビュー①

## Todo一覧機能

### Todoモデルのallメソッドで実行しているSQLは何か
全レコードを取得するSELECTクエリ。

### Todoモデルのallメソッドの返り値は何か
Collectionクラスのインスタンス。Todoインスタンスが格納されていて、各レコードに対応したTodoインスタンスを取得する。

### 配列の代わりにCollectionクラスを使用するメリットは
データ操作を効率化するためのメソッドが多数用意されていて、メソッドチェーンもでき、拡張性や利便性が高い。
メソッド例）filter：条件一致のデータのみ抽出、map：データを変換 等

### view関数の第1・第2引数の指定と何をしているか
第1引数にbladeファイルのパス、第2引数に渡したいデータを連想配列で指定、Controllerから実行しHTMLを生成している。

### index.blade.phpの$todos・$todoに代入されているものは何か
$todosにはControllerで取得したCollectionインスタンス、$todoにはtodoインスタンスが代入されている。

## Todo作成機能

### Requestクラスのallメソッドは何をしているか
入力フォームから送信された全ての値を連想配列で返している。

### fillメソッドは何をしているか
todoインスタンスの各プロパティに取得した値を一括で代入している。

### $fillableは何のために設定しているか
一括代入には脆弱性があるため代入可能なプロパティを制限することで、不正やなりすましを対策できる。

### saveメソッドで実行しているSQLは何か
新しくレコードを保存する場合はINSERTクエリ、既存のクエリを更新する場合はUPDATEクエリ。

### redirect()->route()は何をしているか
定義した名前付きルートを'route()'の引数に渡し、TODO新規作成後にリダイレクトしている。

## その他

### テーブル構成をマイグレーションファイルで管理するメリット
データベース構造のバージョン管理が容易。
マイグレーションファイルをGIT管理することで開発者間で同一のテーブル構成を共有でき、変更履歴の確認や変更内容を元に戻したりできる。

### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
それぞれ特定のArtisanコマンドを実行した際に呼び出される。
例）
up()...'php artisan migrate' マイグレーション実行。
down()...'php artisan migrate:rollback' 最後に実行されたマイグレーションの変更を取り消す。

### Seederクラスの役割は何か
・アプリケーションに必要な初期データをデータベースに挿入
・テストのためのダミーデータ生成

### route関数の引数・返り値・使用するメリット
引数...名前付ルート
返り値...指定したルートで生成したURL
メリット...URLが変わってもルート名が変わらなければコード修正の必要が無いため、可読性や保守性が向上する。

### @extends・@section・@yieldの関係性とbladeを分割するメリット
子blade内で@extendsで親となるbladeを継承し、@section ~ @endsectionで囲われたコンテンツを、親bladeの@yield部分に挿入している。bladeを分割することで共通のコードは継承で再利用できるようになるため、保守性が向上する。

### @csrfは何のための記述か
フォーム送信時にCSRF攻撃を防止するための記述。フォームに'@csrf'を記述するだけでトークンが自動的に挿入される。

### {{ }}とは何の省略系か
PHPのecho文を簡略化したもの。自動的にエスケープ処理されるためXSS攻撃を防げる。